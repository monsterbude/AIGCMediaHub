# AIGC Media Hub User Manual

AIGC Media Hub is a local media management tool designed for AI creators. It automatically parses metadata from images generated by WebUI and ComfyUI (Prompt, Model, LoRA, etc.), providing efficient browsing, searching, and favorite functions.

## 1. Project Initialization

Before you start, ensure you have [Node.js](https://nodejs.org/) installed (recommended v18+).

### 1.1 Install Dependencies

Run the following in the project root:

```bash
npm install
```

### 1.2 Initialize Database

This project uses SQLite. Generate the database and apply the schema using:

```bash
echo DATABASE_URL="file:./prisma/dev.db" > .env

npx prisma migrate dev --name init
```

### 1.3 Start the Project

Run the development server:

```bash
npm run dev
```

Once started, visit [http://localhost:3000](http://localhost:3000) to access the interface.

## 2. Operation Guide

### 2.1 Scan Local Assets

1. **Enter Path**: Type the absolute path to your AI generation outputs (e.g., `D:\StableDiffusion\outputs`) in the sidebar input field.
2. **Execute Scan**: Click the `+` (Scan) button.
   - The system recursively traverses subfolders.
   - Thumbnails are generated (stored in `.cache`) to speed up gallery loading.
   - AIGC parameters (WebUI PNG Info or ComfyUI JSON) are automatically extracted.
3. **Real-time Logs**: Click the log button in the bottom right to monitor scanning progress.

### 2.2 Browse and Filter

- **Folder Tree**: The optimized sidebar provides a hierarchical view. Deep paths are automatically condensed using "Path Compacting" (e.g., `C: › ... › AIGC`).
- **Advanced Filters**:
  - Expand the panels to see tags automatically categorized by **Models**, **LoRAs**, and **Tools**.
  - Supports multi-tag filtering (AND logic) to find specific generation combinations.
- **Favorites**: Click the "Golden Star" button to show only your bookmarked items.

### 2.3 Asset Management

- **Card Interactions**:
  - **Hover Actions**: Quickly `Copy Prompt`, `Star` (Favorite), or view `Info`.
- **Details Sidebar**: Click any image to see full generation parameters (Seed, Sampler, CFG, Prompt, etc.) and copy the file path.
- **Fullscreen Preview**: Double-click an image to enter Lightbox mode with zoom and pan support.

### 2.4 Data Export

- **Export Paths**: Click `Export Paths` at the top to copy the absolute paths of all currently filtered files. This is useful for dataset preparation or external scripts.

## 3. FAQ

- **Images missing?** Ensure the path is correct and files contain standard metadata.
- **Slow loading?** Initial scans generate thumbnails. Subsequent access will be much faster.
- **Rescan**: Click `Scan` again to sync changes (orphaned records for deleted files will be removed).
- **Development Conventions**:
  - **Modularity Principle**: If a code file exceeds **500 lines**, it must be split into smaller components or modules.
